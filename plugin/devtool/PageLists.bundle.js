"use strict";
(self["webpackChunkaloha"] = self["webpackChunkaloha"] || []).push([["PageLists"],{

/***/ "./src/views/PageLists/PageLists.vue":
/*!*******************************************!*\
  !*** ./src/views/PageLists/PageLists.vue ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _PageLists_pug_vue_type_template_id_c3ae265a_lang_pug_external__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PageLists.pug?vue&type=template&id=c3ae265a&lang=pug&external */ "./src/views/PageLists/PageLists.pug?vue&type=template&id=c3ae265a&lang=pug&external");
/* harmony import */ var _PageLists_js_vue_type_script_lang_js_external__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PageLists.js?vue&type=script&lang=js&external */ "./src/views/PageLists/PageLists.js?vue&type=script&lang=js&external?9320");
/* harmony import */ var _node_modules_vue_loader_dist_exportHelper_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../node_modules/vue-loader/dist/exportHelper.js */ "./node_modules/vue-loader/dist/exportHelper.js");




;
const __exports__ = /*#__PURE__*/(0,_node_modules_vue_loader_dist_exportHelper_js__WEBPACK_IMPORTED_MODULE_2__["default"])(_PageLists_js_vue_type_script_lang_js_external__WEBPACK_IMPORTED_MODULE_1__["default"], [['render',_PageLists_pug_vue_type_template_id_c3ae265a_lang_pug_external__WEBPACK_IMPORTED_MODULE_0__.render],['__file',"src/views/PageLists/PageLists.vue"]])
/* hot reload */
if (false) {}


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__exports__);

/***/ }),

/***/ "./src/views/PageLists/PageLists.pug?vue&type=template&id=c3ae265a&lang=pug&external":
/*!*******************************************************************************************!*\
  !*** ./src/views/PageLists/PageLists.pug?vue&type=template&id=c3ae265a&lang=pug&external ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   render: () => (/* reexport safe */ _node_modules_vue_loader_dist_templateLoader_js_ruleSet_1_rules_1_node_modules_vue_pug_loader_index_js_PageLists_pug_vue_type_template_id_c3ae265a_lang_pug_external__WEBPACK_IMPORTED_MODULE_0__.render)
/* harmony export */ });
/* harmony import */ var _node_modules_vue_loader_dist_templateLoader_js_ruleSet_1_rules_1_node_modules_vue_pug_loader_index_js_PageLists_pug_vue_type_template_id_c3ae265a_lang_pug_external__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[1]!../../../node_modules/vue-pug-loader/index.js!./PageLists.pug?vue&type=template&id=c3ae265a&lang=pug&external */ "./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[1]!./node_modules/vue-pug-loader/index.js!./src/views/PageLists/PageLists.pug?vue&type=template&id=c3ae265a&lang=pug&external");


/***/ }),

/***/ "./src/views/PageLists/PageLists.js?vue&type=script&lang=js&external?9320":
/*!***************************************************************************!*\
  !*** ./src/views/PageLists/PageLists.js?vue&type=script&lang=js&external ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _PageLists_js_vue_type_script_lang_js_external__WEBPACK_IMPORTED_MODULE_0__["default"])
/* harmony export */ });
/* harmony import */ var _PageLists_js_vue_type_script_lang_js_external__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./PageLists.js?vue&type=script&lang=js&external */ "./src/views/PageLists/PageLists.js?vue&type=script&lang=js&external?f95d");
 

/***/ }),

/***/ "./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[1]!./node_modules/vue-pug-loader/index.js!./src/views/PageLists/PageLists.pug?vue&type=template&id=c3ae265a&lang=pug&external":
/*!********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[1]!./node_modules/vue-pug-loader/index.js!./src/views/PageLists/PageLists.pug?vue&type=template&id=c3ae265a&lang=pug&external ***!
  \********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   render: () => (/* binding */ render)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.esm-bundler.js");


function render(_ctx, _cache) {
  const _component_a_translation = (0,vue__WEBPACK_IMPORTED_MODULE_0__.resolveComponent)("a-translation")
  const _component_a_element = (0,vue__WEBPACK_IMPORTED_MODULE_0__.resolveComponent)("a-element")

  return ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("div", null, [
    (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)(_component_a_translation, {
      tag: "h1",
      text: "_LISTS_OL_UL_DL_"
    }),
    (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", null, [
      (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)(_component_a_element, {
        class: "a_btn a_btn_primary",
        type: "button",
        text: _ctx.textForBtnToggle,
        onClick: _ctx.toggleLists
      }, null, 8 /* PROPS */, ["text", "onClick"])
    ])
  ]))
}

/***/ }),

/***/ "./src/functions/utils.js":
/*!********************************!*\
  !*** ./src/functions/utils.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   traverse: () => (/* binding */ traverse)
/* harmony export */ });
function traverse(tags = [], className, stop = false) {
  traverseNew(window, tags, stop);

  function traverseNew(currentWindow = window, tags = [], stop) {
    deleteTags(currentWindow);
    try {
      if (!stop) {
        for (let i = 0; i < tags.length; i++) {
          insertTag(currentWindow, tags[i]);
        }
      }
      for (let i = 0; i < currentWindow.frames.length; i++) {
        traverseNew(currentWindow.frames[i], tags, stop);
      }
    } catch (e) {
      console.warn(e);
    }

    function deleteTags(currentWindow) {
      const ALL_TAGS = currentWindow.document.querySelectorAll(`.${ className }`);
      ALL_TAGS.forEach(element => {
        element.parentNode.removeChild(element);
      });
    }

    function insertTag(w, tag) {
      const CURRENT_TAGS = w.document.getElementsByTagName(tag.name);
      for (let i = 0; i < CURRENT_TAGS.length; i++) {
        if (!tag.insertInParent) {
          CURRENT_TAGS[i].insertBefore(createTag(w, tag, ""), CURRENT_TAGS[i].firstChild);
          CURRENT_TAGS[i].appendChild(createTag(w, tag, "/"));
        } else {
          CURRENT_TAGS[i].parentNode.insertBefore(createTag(w, tag, ""), CURRENT_TAGS[i]);
          CURRENT_TAGS[i].parentNode.insertBefore(createTag(w, tag, "/"), CURRENT_TAGS[i].nextSibling);
        }
      }
    }

    function createTag(w, tag, slash) {
      const SPAN = w.document.createElement("span");
      SPAN.className = className;
      const STYLE = SPAN.style;
      STYLE.color = tag.color;
      STYLE.backgroundColor = "#fff";
      STYLE.backgroundImage = "none";
      STYLE.fontSize = tag.fontSize || "1.2rem";
      STYLE.fontWeight = "bold";
      STYLE.padding = "0.3rem";
      STYLE.border = `1px solid ${ tag.color }`;
      const TEXT_NODE = w.document.createTextNode("<" + slash + tag.name + ">");
      SPAN.insertBefore(TEXT_NODE, SPAN.firstChild);
      return SPAN;
    }
  }
}


/***/ }),

/***/ "./src/views/PageLists/PageLists.js?vue&type=script&lang=js&external?f95d":
/*!***************************************************************************!*\
  !*** ./src/views/PageLists/PageLists.js?vue&type=script&lang=js&external ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var aloha_vue_src_AElement_AElement__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aloha-vue/src/AElement/AElement */ "./node_modules/aloha-vue/src/AElement/AElement.js");
/* harmony import */ var aloha_vue_src_ATranslation_ATranslation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! aloha-vue/src/ATranslation/ATranslation */ "./node_modules/aloha-vue/src/ATranslation/ATranslation.js");
/* harmony import */ var _compositionAPI_EventsAPI__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./compositionAPI/EventsAPI */ "./src/views/PageLists/compositionAPI/EventsAPI.js");





/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  name: "PageLists",
  components: {
    AElement: aloha_vue_src_AElement_AElement__WEBPACK_IMPORTED_MODULE_0__["default"],
    ATranslation: aloha_vue_src_ATranslation_ATranslation__WEBPACK_IMPORTED_MODULE_1__["default"],
  },
  setup() {
    const {
      textForBtnToggle,
      toggleLists,
    } = (0,_compositionAPI_EventsAPI__WEBPACK_IMPORTED_MODULE_2__["default"])();

    return {
      textForBtnToggle,
      toggleLists,
    };
  },
});


/***/ }),

/***/ "./src/views/PageLists/compositionAPI/EventsAPI.js":
/*!*********************************************************!*\
  !*** ./src/views/PageLists/compositionAPI/EventsAPI.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ EventsAPI)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.esm-bundler.js");
/* harmony import */ var _functions_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../functions/utils */ "./src/functions/utils.js");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash-es */ "./node_modules/lodash/lodash.js");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_es__WEBPACK_IMPORTED_MODULE_2__);





function EventsAPI() {
  const chromeTabId = (0,vue__WEBPACK_IMPORTED_MODULE_0__.inject)("chromeTabId");

  const isListsVisible = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(false);
  const TAGS = [
    {
      name: "UL",
      color: "#ff0000",
      insertInParent: true,
    },
    {
      name: "OL",
      color: "#713939",
      insertInParent: true,
    },
    {
      name: "DL",
      color: "#00aa00",
      insertInParent: true,
    },
    {
      name: "LI",
      color: "#054164",
      insertInParent: false,
    },
    {
      name: "DT",
      color: "#054164",
      insertInParent: false,
    },
    {
      name: "DD",
      color: "#054164",
      insertInParent: false,
    },
  ];

  const textForBtnToggle = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
    return isListsVisible.value ?
      "_LISTS_HIDE_" :
      "_LISTS_SHOW_";
  });

  const toggleLists = ({ statusStop } = {}) => {
    const STATUS_STOP = (0,lodash_es__WEBPACK_IMPORTED_MODULE_2__.isUndefined)(statusStop) ?
      !!isListsVisible.value :
      statusStop;
    chrome.scripting.executeScript(
      {
        target: {
          tabId: chromeTabId.value,
          allFrames: true,
        },
        function: _functions_utils__WEBPACK_IMPORTED_MODULE_1__.traverse,
        args: [TAGS, "a11y_lists", STATUS_STOP],
      }
    );
    isListsVisible.value = !STATUS_STOP;
  };

  return {
    textForBtnToggle,
    toggleLists,
  };
}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGFnZUxpc3RzLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQXdGO0FBQ3BCO0FBQ0w7O0FBRS9ELENBQW1GO0FBQ25GLGlDQUFpQyx5RkFBZSxDQUFDLHNGQUFNLGFBQWEsa0dBQU07QUFDMUU7QUFDQSxJQUFJLEtBQVUsRUFBRSxFQVlmOzs7QUFHRCxpRUFBZTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdEI2RDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzREQ0E1RSx3REFBcU07SUFBaE0saURBQWdFO01BQWpELEdBQUcsRUFBQyxJQUFJO01BQUMsSUFBSSxFQUFDLGtCQUFrQjs7SUFBaUIsd0RBQTBIO01BQXJILGlEQUErRztRQUFwRyxLQUFLLEVBQUMscUJBQXFCO1FBQUMsSUFBSSxFQUFDLFFBQVE7UUFBRSxJQUFJLEVBQUVBLHFCQUFnQjtRQUFHLE9BQUssRUFBRUMsZ0JBQVc7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0FwSztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpQkFBaUI7QUFDekM7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlDQUFpQztBQUN2RDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLFdBQVc7QUFDL0U7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5QkFBeUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFdBQVc7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN0RHVEO0FBQ1k7QUFDbkU7QUFDbUQ7QUFDbkQ7QUFDQSxpRUFBZTtBQUNmO0FBQ0E7QUFDQSxZQUFZO0FBQ1osZ0JBQWdCO0FBQ2hCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sRUFBRSxxRUFBUztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUMsRUFBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xCVztBQUNiO0FBR2tDO0FBR2Y7QUFDbkI7QUFDZTtBQUNmLHNCQUFzQiwyQ0FBTTtBQUM1QjtBQUNBLHlCQUF5Qix3Q0FBRztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSwyQkFBMkIsNkNBQVE7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EseUJBQXlCLGFBQWEsSUFBSTtBQUMxQyx3QkFBd0Isc0RBQVc7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Qsa0JBQWtCLHNEQUFRO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbG9oYS8uL3NyYy92aWV3cy9QYWdlTGlzdHMvUGFnZUxpc3RzLnZ1ZSIsIndlYnBhY2s6Ly9hbG9oYS8uL3NyYy92aWV3cy9QYWdlTGlzdHMvUGFnZUxpc3RzLmpzPzkzMjAiLCJ3ZWJwYWNrOi8vYWxvaGEvLi9zcmMvdmlld3MvUGFnZUxpc3RzL1BhZ2VMaXN0cy5wdWciLCJ3ZWJwYWNrOi8vYWxvaGEvLi9zcmMvZnVuY3Rpb25zL3V0aWxzLmpzIiwid2VicGFjazovL2Fsb2hhLy4vc3JjL3ZpZXdzL1BhZ2VMaXN0cy9QYWdlTGlzdHMuanMiLCJ3ZWJwYWNrOi8vYWxvaGEvLi9zcmMvdmlld3MvUGFnZUxpc3RzL2NvbXBvc2l0aW9uQVBJL0V2ZW50c0FQSS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZW5kZXIgfSBmcm9tIFwiLi9QYWdlTGlzdHMucHVnP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPWMzYWUyNjVhJmxhbmc9cHVnJmV4dGVybmFsXCJcbmltcG9ydCBzY3JpcHQgZnJvbSBcIi4vUGFnZUxpc3RzLmpzP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJmV4dGVybmFsXCJcbmV4cG9ydCAqIGZyb20gXCIuL1BhZ2VMaXN0cy5qcz92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZleHRlcm5hbFwiXG5cbmltcG9ydCBleHBvcnRDb21wb25lbnQgZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2Rpc3QvZXhwb3J0SGVscGVyLmpzXCJcbmNvbnN0IF9fZXhwb3J0c19fID0gLyojX19QVVJFX18qL2V4cG9ydENvbXBvbmVudChzY3JpcHQsIFtbJ3JlbmRlcicscmVuZGVyXSxbJ19fZmlsZScsXCJzcmMvdmlld3MvUGFnZUxpc3RzL1BhZ2VMaXN0cy52dWVcIl1dKVxuLyogaG90IHJlbG9hZCAqL1xuaWYgKG1vZHVsZS5ob3QpIHtcbiAgX19leHBvcnRzX18uX19obXJJZCA9IFwiYzNhZTI2NWFcIlxuICBjb25zdCBhcGkgPSBfX1ZVRV9ITVJfUlVOVElNRV9fXG4gIG1vZHVsZS5ob3QuYWNjZXB0KClcbiAgaWYgKCFhcGkuY3JlYXRlUmVjb3JkKCdjM2FlMjY1YScsIF9fZXhwb3J0c19fKSkge1xuICAgIGFwaS5yZWxvYWQoJ2MzYWUyNjVhJywgX19leHBvcnRzX18pXG4gIH1cbiAgXG4gIG1vZHVsZS5ob3QuYWNjZXB0KFwiLi9QYWdlTGlzdHMucHVnP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPWMzYWUyNjVhJmxhbmc9cHVnJmV4dGVybmFsXCIsICgpID0+IHtcbiAgICBhcGkucmVyZW5kZXIoJ2MzYWUyNjVhJywgcmVuZGVyKVxuICB9KVxuXG59XG5cblxuZXhwb3J0IGRlZmF1bHQgX19leHBvcnRzX18iLCJleHBvcnQgeyBkZWZhdWx0IH0gZnJvbSBcIi0hLi9QYWdlTGlzdHMuanM/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9anMmZXh0ZXJuYWxcIjsgZXhwb3J0ICogZnJvbSBcIi0hLi9QYWdlTGlzdHMuanM/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9anMmZXh0ZXJuYWxcIiIsIjxkaXY+PGEtdHJhbnNsYXRpb24gdGFnPVwiaDFcIiB0ZXh0PVwiX0xJU1RTX09MX1VMX0RMX1wiPjwvYS10cmFuc2xhdGlvbj48ZGl2PjxhLWVsZW1lbnQgY2xhc3M9XCJhX2J0biBhX2J0bl9wcmltYXJ5XCIgdHlwZT1cImJ1dHRvblwiIDp0ZXh0PVwidGV4dEZvckJ0blRvZ2dsZVwiIEBjbGljaz1cInRvZ2dsZUxpc3RzXCI+PC9hLWVsZW1lbnQ+PC9kaXY+PC9kaXY+IiwiZXhwb3J0IGZ1bmN0aW9uIHRyYXZlcnNlKHRhZ3MgPSBbXSwgY2xhc3NOYW1lLCBzdG9wID0gZmFsc2UpIHtcclxuICB0cmF2ZXJzZU5ldyh3aW5kb3csIHRhZ3MsIHN0b3ApO1xyXG5cclxuICBmdW5jdGlvbiB0cmF2ZXJzZU5ldyhjdXJyZW50V2luZG93ID0gd2luZG93LCB0YWdzID0gW10sIHN0b3ApIHtcclxuICAgIGRlbGV0ZVRhZ3MoY3VycmVudFdpbmRvdyk7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoIXN0b3ApIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGluc2VydFRhZyhjdXJyZW50V2luZG93LCB0YWdzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyZW50V2luZG93LmZyYW1lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRyYXZlcnNlTmV3KGN1cnJlbnRXaW5kb3cuZnJhbWVzW2ldLCB0YWdzLCBzdG9wKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGVsZXRlVGFncyhjdXJyZW50V2luZG93KSB7XHJcbiAgICAgIGNvbnN0IEFMTF9UQUdTID0gY3VycmVudFdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHsgY2xhc3NOYW1lIH1gKTtcclxuICAgICAgQUxMX1RBR1MuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGluc2VydFRhZyh3LCB0YWcpIHtcclxuICAgICAgY29uc3QgQ1VSUkVOVF9UQUdTID0gdy5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWcubmFtZSk7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ1VSUkVOVF9UQUdTLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKCF0YWcuaW5zZXJ0SW5QYXJlbnQpIHtcclxuICAgICAgICAgIENVUlJFTlRfVEFHU1tpXS5pbnNlcnRCZWZvcmUoY3JlYXRlVGFnKHcsIHRhZywgXCJcIiksIENVUlJFTlRfVEFHU1tpXS5maXJzdENoaWxkKTtcclxuICAgICAgICAgIENVUlJFTlRfVEFHU1tpXS5hcHBlbmRDaGlsZChjcmVhdGVUYWcodywgdGFnLCBcIi9cIikpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBDVVJSRU5UX1RBR1NbaV0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY3JlYXRlVGFnKHcsIHRhZywgXCJcIiksIENVUlJFTlRfVEFHU1tpXSk7XHJcbiAgICAgICAgICBDVVJSRU5UX1RBR1NbaV0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY3JlYXRlVGFnKHcsIHRhZywgXCIvXCIpLCBDVVJSRU5UX1RBR1NbaV0ubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZVRhZyh3LCB0YWcsIHNsYXNoKSB7XHJcbiAgICAgIGNvbnN0IFNQQU4gPSB3LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICBTUEFOLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuICAgICAgY29uc3QgU1RZTEUgPSBTUEFOLnN0eWxlO1xyXG4gICAgICBTVFlMRS5jb2xvciA9IHRhZy5jb2xvcjtcclxuICAgICAgU1RZTEUuYmFja2dyb3VuZENvbG9yID0gXCIjZmZmXCI7XHJcbiAgICAgIFNUWUxFLmJhY2tncm91bmRJbWFnZSA9IFwibm9uZVwiO1xyXG4gICAgICBTVFlMRS5mb250U2l6ZSA9IHRhZy5mb250U2l6ZSB8fCBcIjEuMnJlbVwiO1xyXG4gICAgICBTVFlMRS5mb250V2VpZ2h0ID0gXCJib2xkXCI7XHJcbiAgICAgIFNUWUxFLnBhZGRpbmcgPSBcIjAuM3JlbVwiO1xyXG4gICAgICBTVFlMRS5ib3JkZXIgPSBgMXB4IHNvbGlkICR7IHRhZy5jb2xvciB9YDtcclxuICAgICAgY29uc3QgVEVYVF9OT0RFID0gdy5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIjxcIiArIHNsYXNoICsgdGFnLm5hbWUgKyBcIj5cIik7XHJcbiAgICAgIFNQQU4uaW5zZXJ0QmVmb3JlKFRFWFRfTk9ERSwgU1BBTi5maXJzdENoaWxkKTtcclxuICAgICAgcmV0dXJuIFNQQU47XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBBRWxlbWVudCBmcm9tIFwiYWxvaGEtdnVlL3NyYy9BRWxlbWVudC9BRWxlbWVudFwiO1xyXG5pbXBvcnQgQVRyYW5zbGF0aW9uIGZyb20gXCJhbG9oYS12dWUvc3JjL0FUcmFuc2xhdGlvbi9BVHJhbnNsYXRpb25cIjtcclxuXHJcbmltcG9ydCBFdmVudHNBUEkgZnJvbSBcIi4vY29tcG9zaXRpb25BUEkvRXZlbnRzQVBJXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgbmFtZTogXCJQYWdlTGlzdHNcIixcclxuICBjb21wb25lbnRzOiB7XHJcbiAgICBBRWxlbWVudCxcclxuICAgIEFUcmFuc2xhdGlvbixcclxuICB9LFxyXG4gIHNldHVwKCkge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICB0ZXh0Rm9yQnRuVG9nZ2xlLFxyXG4gICAgICB0b2dnbGVMaXN0cyxcclxuICAgIH0gPSBFdmVudHNBUEkoKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0ZXh0Rm9yQnRuVG9nZ2xlLFxyXG4gICAgICB0b2dnbGVMaXN0cyxcclxuICAgIH07XHJcbiAgfSxcclxufTtcclxuIiwiaW1wb3J0IHtcclxuICBjb21wdXRlZCxcclxuICBpbmplY3QsXHJcbiAgcmVmLFxyXG59IGZyb20gXCJ2dWVcIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgdHJhdmVyc2UsXHJcbn0gZnJvbSBcIi4uLy4uLy4uL2Z1bmN0aW9ucy91dGlsc1wiO1xyXG5pbXBvcnQge1xyXG4gIGlzVW5kZWZpbmVkLFxyXG59IGZyb20gXCJsb2Rhc2gtZXNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEV2ZW50c0FQSSgpIHtcclxuICBjb25zdCBjaHJvbWVUYWJJZCA9IGluamVjdChcImNocm9tZVRhYklkXCIpO1xyXG5cclxuICBjb25zdCBpc0xpc3RzVmlzaWJsZSA9IHJlZihmYWxzZSk7XHJcbiAgY29uc3QgVEFHUyA9IFtcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJVTFwiLFxyXG4gICAgICBjb2xvcjogXCIjZmYwMDAwXCIsXHJcbiAgICAgIGluc2VydEluUGFyZW50OiB0cnVlLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJPTFwiLFxyXG4gICAgICBjb2xvcjogXCIjNzEzOTM5XCIsXHJcbiAgICAgIGluc2VydEluUGFyZW50OiB0cnVlLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJETFwiLFxyXG4gICAgICBjb2xvcjogXCIjMDBhYTAwXCIsXHJcbiAgICAgIGluc2VydEluUGFyZW50OiB0cnVlLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMSVwiLFxyXG4gICAgICBjb2xvcjogXCIjMDU0MTY0XCIsXHJcbiAgICAgIGluc2VydEluUGFyZW50OiBmYWxzZSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiRFRcIixcclxuICAgICAgY29sb3I6IFwiIzA1NDE2NFwiLFxyXG4gICAgICBpbnNlcnRJblBhcmVudDogZmFsc2UsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIkREXCIsXHJcbiAgICAgIGNvbG9yOiBcIiMwNTQxNjRcIixcclxuICAgICAgaW5zZXJ0SW5QYXJlbnQ6IGZhbHNlLFxyXG4gICAgfSxcclxuICBdO1xyXG5cclxuICBjb25zdCB0ZXh0Rm9yQnRuVG9nZ2xlID0gY29tcHV0ZWQoKCkgPT4ge1xyXG4gICAgcmV0dXJuIGlzTGlzdHNWaXNpYmxlLnZhbHVlID9cclxuICAgICAgXCJfTElTVFNfSElERV9cIiA6XHJcbiAgICAgIFwiX0xJU1RTX1NIT1dfXCI7XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHRvZ2dsZUxpc3RzID0gKHsgc3RhdHVzU3RvcCB9ID0ge30pID0+IHtcclxuICAgIGNvbnN0IFNUQVRVU19TVE9QID0gaXNVbmRlZmluZWQoc3RhdHVzU3RvcCkgP1xyXG4gICAgICAhIWlzTGlzdHNWaXNpYmxlLnZhbHVlIDpcclxuICAgICAgc3RhdHVzU3RvcDtcclxuICAgIGNocm9tZS5zY3JpcHRpbmcuZXhlY3V0ZVNjcmlwdChcclxuICAgICAge1xyXG4gICAgICAgIHRhcmdldDoge1xyXG4gICAgICAgICAgdGFiSWQ6IGNocm9tZVRhYklkLnZhbHVlLFxyXG4gICAgICAgICAgYWxsRnJhbWVzOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZnVuY3Rpb246IHRyYXZlcnNlLFxyXG4gICAgICAgIGFyZ3M6IFtUQUdTLCBcImExMXlfbGlzdHNcIiwgU1RBVFVTX1NUT1BdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgaXNMaXN0c1Zpc2libGUudmFsdWUgPSAhU1RBVFVTX1NUT1A7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHRleHRGb3JCdG5Ub2dnbGUsXHJcbiAgICB0b2dnbGVMaXN0cyxcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ0ZXh0Rm9yQnRuVG9nZ2xlIiwidG9nZ2xlTGlzdHMiXSwic291cmNlUm9vdCI6IiJ9